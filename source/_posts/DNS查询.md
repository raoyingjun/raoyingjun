---
title: DNS 查询
date: 2022-2-14 16:21:59
tags: 计算机网络
categories: 计算机网络
---

### DNS 查询过程

1. 客户端请求指定域名
2. 查询本地 DNS 服务器缓存中是否有对应 IP 地址，如果有则返回
3. 否则，查询本地 DNS 服务器，如果本地 DNS 服务器有则返回
4. 否则，本地 DNS 服务器向根 DNS 服务器发起请求，根 DNS 服务器会解析根域名返回对应顶级 DNS 服务器的 IP 地址
5. 本地 DNS 服务器向对应顶级 DNS 服务器的IP地址发起请求，顶级 DNS 服务器返回对应权威 DNS 服务器的 IP 地址
6. 本地 DNS 服务器向对应权威 DNS 服务器的IP地址发起请求，权威 DNS 服务器会返回对应主机名的 IP 地址
7. 本地 DNS 服务器将返回的结果保存于缓存中，以便下次使用
8. 本地 DNS 服务器返回结果给客户端

### DNS 查询中的递归查询和迭代查询

* 递归查询，指的是主机向本地 DNS 服务器发起查询。客户端只发起一次请求 ，本地 DNS 服务器会继续向下一级 DNS 服务器发起查询，最后将查询的结果返回
* 迭代查询，指的是本地 DNS 服务器向根 DNS 服务器的查询。客户端需要发出多次查询请求，本地 DNS 服务器只去单次查询并返回结果，下一级查询需要本地 DNS 服务器根据本次查询的结果继续去查询。



